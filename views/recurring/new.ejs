<% layout("./layout/boilerplate") %>
<link rel="stylesheet" href="/css/new.css">

<div class="expense-container">
    <div class="page-header">
        <h1><i class="fas fa-sync-alt"></i> New Recurring Transaction</h1>
        <p class="subtitle">Set up a scheduled income or expense</p>
    </div>
    
    <div class="card expense-form-card">
        <form action="/recurring" method="POST" class="expense-form" id="recurringForm">
            <div class="form-group">
                <label for="title"><i class="fas fa-heading"></i> Title</label>
                <input type="text" id="title" name="title" placeholder="e.g., Rent Payment, Salary" required>
            </div>

            <div class="form-group type-group">
                <label for="type"><i class="fas fa-exchange-alt"></i> Transaction Type</label>
                <select id="type" name="type" required>
                    <option value="income">Income</option>
                    <option value="expense" selected>Expense</option>
                </select>
            </div>

            <div class="form-group amount-group">
                <label for="amount"><i class="fas fa-money-bill-wave"></i> Amount</label>
                <div class="input-with-icon">
                    <span class="currency-symbol"></span>
                    <input type="number" id="amount" name="amount" step="0.01" min="0.01" placeholder="0.00" required>
                </div>
            </div>

            <div class="form-group">
                <label for="sourceOfCategory"><i class="fas fa-tag"></i> Category</label>
                <select id="sourceOfCategory" name="sourceOfCategory" required>
                    <option value="">Select a category</option>
                    <option value="Housing">Housing</option>
                    <option value="Transportation">Transportation</option>
                    <option value="Food">Food</option>
                    <option value="Utilities">Utilities</option>
                    <option value="Insurance">Insurance</option>
                    <option value="Healthcare">Healthcare</option>
                    <option value="Savings">Savings</option>
                    <option value="Personal">Personal</option>
                    <option value="Entertainment">Entertainment</option>
                    <option value="Education">Education</option>
                    <option value="Debt">Debt</option>
                    <option value="Salary">Salary</option>
                    <option value="Investments">Investments</option>
                    <option value="Gifts">Gifts</option>
                    <option value="Other">Other</option>
                </select>
            </div>

            <div class="form-group">
                <label for="frequency"><i class="fas fa-sync"></i> Frequency</label>
                <select id="frequency" name="frequency" required>
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="biweekly">Bi-weekly</option>
                    <option value="monthly" selected>Monthly</option>
                    <option value="quarterly">Quarterly</option>
                    <option value="yearly">Yearly</option>
                </select>
            </div>

            <div class="form-group date-group">
                <label for="startDate"><i class="fas fa-calendar-day"></i> Start Date</label>
                <input type="date" id="startDate" name="startDate" required>
            </div>

            <div class="form-group date-group">
                <label for="endDate"><i class="fas fa-calendar-times"></i> End Date (Optional)</label>
                <input type="date" id="endDate" name="endDate">
            </div>

            <div class="form-group description">
                <label for="description">Description</label>
                <textarea id="description" name="description" placeholder="Enter a detailed description..."></textarea>
              </div>
              

            <button type="submit" class="btn btn-primary submit-btn">
                <i class="fas fa-plus-circle"></i> Create Recurring Transaction
            </button>
        </form>
    </div>

    <div class="back-link">
        <a href="/recurring" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const startDateInput = document.getElementById('startDate');
        const endDateInput = document.getElementById('endDate');

        const today = new Date().toISOString().split('T')[0];
        if (startDateInput) {
            startDateInput.value = today;
            startDateInput.min = today;
        }

        if (endDateInput && startDateInput) {
            startDateInput.addEventListener('change', function () {
                endDateInput.min = startDateInput.value;
            });
            endDateInput.min = startDateInput.value;
        }
    });
</script>
